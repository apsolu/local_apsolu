define(['jquery','enrol_select/select2'],function($){return{initialise:function(){function filter(){$('#apsolu-enrol-select tbody tr').css('display','table-row');$('.apsolu-enrol-selects').each(function(index){values=$(this).select2('data');target=$(this).attr('name');if(values.length===0){return;}
header_children=undefined;$('#apsolu-enrol-select tbody tr').each(function(){if($(this).children().length===1){if(header_children===0){header.css('display','none');}
header=$(this);header_children=0;return;}
if($(this).css('display')==='none'){return;}
console.log(target);for(var i=0;i<values.length;i++){value=$.trim($(this).children('[data-column="'+target+'"]').attr('data-value'));if(value.indexOf(values[i].text)!==-1){header_children++;return;}}
$(this).css('display','none');});if(header_children===0){header.css('display','none');}});}
$('.apsolu-enrol-selects').select2({allowClear:true,width:'18em'});$('.apsolu-enrol-selects').on('change.select2',function(){filter();});filter();}};});