define(['jquery','enrol_select/select2'],function($){return{initialise:function(){function filter(){$('#apsolu-enrol-select tbody tr').css('display','table-row');$('.apsolu-enrol-selects').each(function(){var values=$(this).select2('data');var target=$(this).attr('name');if(values.length===0){return;}
var header;var headerChildren;$('#apsolu-enrol-select tbody tr').each(function(){if($(this).children().length===1){if(headerChildren===0){header.css('display','none');}
header=$(this);headerChildren=0;return;}
if($(this).css('display')==='none'){return;}
for(var i=0;i<values.length;i++){var value=$.trim($(this).children('[data-column="'+target+'"]').attr('data-value'));if(value.indexOf(values[i].text)!==-1){headerChildren++;return;}}
$(this).css('display','none');});if(headerChildren===0){header.css('display','none');}});}
$('.apsolu-enrol-selects').select2({allowClear:true,width:'18em'});$('.apsolu-enrol-selects').on('change.select2',function(){filter();});filter();function toggleFilterBlock(){var filters=document.getElementById('apsolu-offerings-filters-aside');if(filters){if(filters.style.display=='block'){filters.style.display='none';}else{filters.style.display='block';}}}
if(document.getElementsByClassName('select2-selection__choice').length>0){toggleFilterBlock();}
var toggleFiltersButton=document.getElementById('toggle-filters-button');if(toggleFiltersButton){toggleFiltersButton.addEventListener('click',toggleFilterBlock);}}};});